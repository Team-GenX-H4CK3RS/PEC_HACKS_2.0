(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{5260:function(e,t,i){function a(e){var t;if(!e)throw"MediaStream is mandatory.";this.start=function(i){"undefined"!=typeof MediaRecorder?a=g:(h||c||u)&&(-1!==this.mimeType.indexOf("video")?a=y:-1!==this.mimeType.indexOf("audio")&&(a=w)),"image/gif"===this.mimeType&&(a=T),("audio/wav"===this.mimeType||"audio/pcm"===this.mimeType)&&(a=w),this.recorderType&&(a=this.recorderType),(t=new a(e)).blobs=[];var a,n=this;t.ondataavailable=function(e){t.blobs.push(e),n.ondataavailable(e)},t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,(t=function(e,t){for(var i in t)"function"!=typeof t[i]&&(e[i]=t[i]);return e}(t,this)).start(i)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.save=function(e,i){if(!e){if(!t)return;ConcatenateBlobs(t.blobs,t.blobs[0].type,function(e){f(e)});return}f(e,i)},this.pause=function(){t&&(t.pause(),console.log("Paused recording.",this.mimeType||t.mimeType))},this.resume=function(){t&&(t.resume(),console.log("Resumed recording.",this.mimeType||t.mimeType))},this.recorderType=null,this.mimeType="video/webm",this.disableLogs=!1}a.MultiStreamRecorder=function(e){if(!e)throw"MediaStream is mandatory.";var t,i,n=this,o=p();this.stream=e,this.start=function(d){for(var u in t=new a(e),i=new a(e),t.mimeType="audio/ogg",i.mimeType="video/webm",this)"function"!=typeof this[u]&&(t[u]=i[u]=this[u]);function c(e){s++,n.ondataavailable(e)}t.ondataavailable=function(e){r[s]||(r[s]={}),r[s].audio=e,r[s].video&&!r[s].onDataAvailableEventFired&&(r[s].onDataAvailableEventFired=!0,c(r[s]))},i.ondataavailable=function(e){if(o)return n.ondataavailable({video:e,audio:e});r[s]||(r[s]={}),r[s].video=e,r[s].audio&&!r[s].onDataAvailableEventFired&&(r[s].onDataAvailableEventFired=!0,c(r[s]))},i.onstop=t.onstop=function(e){n.onstop(e)},o||(i.onStartedDrawingNonBlankFrames=function(){i.clearOldRecordedFrames(),t.start(d)}),i.start(d)},this.stop=function(){t&&t.stop(),i&&i.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.pause=function(){t&&t.pause(),i&&i.pause()},this.resume=function(){t&&t.resume(),i&&i.resume()};var r={},s=0};var n,o,r="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";n=void 0!==i.g?i.g:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==i.g&&(i.g.navigator={userAgent:r,getUserMedia:function(){}},n.window=i.g),"undefined"==typeof document&&(n.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),"undefined"==typeof location&&(n.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(n.screen={width:0,height:0}));var s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext)),"undefined"==typeof window&&(window={});var s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext));var d=window.URL;void 0===d&&"undefined"!=typeof webkitURL&&(d=webkitURL),"undefined"!=typeof navigator?(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia)):navigator={getUserMedia:function(){},userAgent:r};var u=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),c=!1;"undefined"!=typeof opera&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("OPR/")&&(c=!0);var h=!u&&!u&&!!navigator.webkitGetUserMedia,l=window.MediaStream;function f(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var i=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var a=t.split(".");t=a[0],i=a[1]}var n=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,n);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,n);var o=document.createElement("a");o.href=d.createObjectURL(e),o.target="_blank",o.download=n,navigator.mozGetUserMedia&&(o.onclick=function(){(document.body||document.documentElement).removeChild(o)},(document.body||document.documentElement).appendChild(o));var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.dispatchEvent(r),navigator.mozGetUserMedia||d.revokeObjectURL(o.href)}function m(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function p(){var e,t,i=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,a=!!window.chrome&&!i;if(void 0!==window.InstallTrigger)return!0;if(!a)return!1;navigator.appVersion;var n=navigator.userAgent,o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return a&&(e=n.indexOf("Chrome"),o=n.substring(e+7)),-1!==(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!==(t=o.indexOf(" "))&&(o=o.substring(0,t)),isNaN(r=parseInt(""+o,10))&&(o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}void 0===l&&"undefined"!=typeof webkitMediaStream&&(l=webkitMediaStream),void 0===l||("getVideoTracks"in l.prototype||(l.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)}),e},l.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)}),e}),"stop"in l.prototype||(l.prototype.stop=function(){this.getAudioTracks().forEach(function(e){e.stop&&e.stop()}),this.getVideoTracks().forEach(function(e){e.stop&&e.stop()})})),"undefined"!=typeof location&&0===location.href.indexOf("file:")&&console.error("Please load this HTML file on HTTP or HTTPS.");var v={AudioContext:window.AudioContext||window.webkitAudioContext};function g(e){var t,i=this;this.start=function(a,n){if(i.mimeType||(i.mimeType="video/webm"),-1!==i.mimeType.indexOf("audio")&&e.getVideoTracks().length&&e.getAudioTracks().length){var o;navigator.mozGetUserMedia?(o=new l).addTrack(e.getAudioTracks()[0]):o=new l(e.getAudioTracks()),e=o}-1!==i.mimeType.indexOf("audio")&&(i.mimeType=h?"audio/webm":"audio/ogg"),i.dontFireOnDataAvailableEvent=!1;var r={mimeType:i.mimeType};i.disableLogs||n||console.log("Passing following params over MediaRecorder API.",r),t&&(t=null),h&&!p()&&(r="video/vp8");try{t=new MediaRecorder(e,r)}catch(i){t=new MediaRecorder(e)}"canRecordMimeType"in t&&!1===t.canRecordMimeType(i.mimeType)&&!i.disableLogs&&console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType),t.ignoreMutedMedia=i.ignoreMutedMedia||!1;var s=!1;t.ondataavailable=function(e){if(!i.dontFireOnDataAvailableEvent&&e.data&&e.data.size&&!(e.data.size<26800)&&!s){s=!0;var n=i.getNativeBlob?e.data:new Blob([e.data],{type:i.mimeType||"video/webm"});i.ondataavailable(n),i.dontFireOnDataAvailableEvent=!0,t&&(t.stop(),t=null),i.start(a,"__disableLogs")}},t.onerror=function(e){i.disableLogs||("InvalidState"===e.name?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),t&&"inactive"!==t.state&&"stopped"!==t.state&&t.stop()};try{t.start(36e5)}catch(e){t=null}setTimeout(function(){t&&"recording"===t.state&&t.requestData()},a)},this.stop=function(e){t&&"recording"===t.state&&(t.requestData(),setTimeout(function(){i.dontFireOnDataAvailableEvent=!0,t&&"recording"===t.state&&t.stop(),t=null},2e3))},this.pause=function(){t&&"recording"===t.state&&t.pause()},this.ondataavailable=function(e){console.log("recorded-blob",e)},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var e=i.disableLogs;i.disableLogs=!0,this.record(),i.disableLogs=e;return}t&&"paused"===t.state&&t.resume()},this.clearRecordedData=function(){t&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())},function a(){if(t){if(!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()){i.stop();return}setTimeout(a,1e3)}}()}function w(e){var t,i;this.start=function(a){a=a||1e3,(t=new b(e,this)).record(),i=setInterval(function(){t.requestData()},a)},this.stop=function(){t&&(t.stop(),clearTimeout(i))},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){}}function b(e,t){var i,a,n,o,r=44100;v.AudioContextConstructor||(v.AudioContextConstructor=new v.AudioContext),r=v.AudioContextConstructor.sampleRate;var s=[],d=[],u=!1,c=0,h=t.sampleRate||r,l=(t.mimeType||"audio/wav").indexOf("audio/pcm")>-1,f=t.audioChannels||2;function p(e,t){for(var i=new Float32Array(t),a=0,n=e.length,o=0;o<n;o++){var r=e[o];i.set(r,a),a+=r.length}return i}function g(e,t,i){for(var a=i.length,n=0;n<a;n++)e.setUint8(t+n,i.charCodeAt(n))}this.record=function(){u=!0,s.length=d.length=0,c=0},this.requestData=function(){if(!y){if(0===c){b=!1;return}b=!0;var e=s.slice(0),i=d.slice(0),a=c;s.length=d.length=[],c=0,b=!1;var n=p(e,a),o=n;if(2===f&&(o=function(e,t){for(var i=e.length+t.length,a=new Float32Array(i),n=0,o=0;o<i;)a[o++]=e[n],a[o++]=t[n],n++;return a}(n,p(i,a))),l){var r=new Blob([function(e){for(var t=e.length,i=new Int16Array(t);t--;)i[t]=65535*e[t];return i.buffer}(o)],{type:"audio/pcm"});console.debug("audio recorded blob size:",m(r.size)),t.ondataavailable(r);return}var u=new DataView(new ArrayBuffer(44+2*o.length));g(u,0,"RIFF"),u.setUint32(4,44+2*o.length-8,!0),g(u,8,"WAVE"),g(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,f,!0),u.setUint32(24,h,!0),u.setUint32(28,h*f*2,!0),u.setUint16(32,2*f,!0),u.setUint16(34,16,!0),g(u,36,"data"),u.setUint32(40,2*o.length,!0);for(var v=o.length,w=44,A=0;A<v;A++)u.setInt16(w,32767*o[A],!0),w+=2;var r=new Blob([u],{type:"audio/wav"});console.debug("audio recorded blob size:",m(r.size)),t.ondataavailable(r)}},this.stop=function(){u=!1,this.requestData(),n.disconnect()};var o=v.AudioContextConstructor;v.VolumeGainNode=o.createGain();var a=v.VolumeGainNode;v.AudioInput=o.createMediaStreamSource(e);var n=v.AudioInput;n.connect(a);var w=t.bufferSize||2048;if(0===t.bufferSize&&(w=0),o.createJavaScriptNode)i=o.createJavaScriptNode(w,f,f);else if(o.createScriptProcessor)i=o.createScriptProcessor(w,f,f);else throw"WebAudio API has no support on this browser.";console.debug("using audio buffer-size:",w=i.bufferSize);var b=!1;window.scriptprocessornode=i,1===f&&console.debug("All right-channels are skipped.");var y=!1;this.pause=function(){y=!0},this.resume=function(){y=!1},i.onaudioprocess=function(e){if(u&&!b&&!y){var t=e.inputBuffer.getChannelData(0);if(s.push(new Float32Array(t)),2===f){var i=e.inputBuffer.getChannelData(1);d.push(new Float32Array(i))}c+=w}},a.connect(i),i.connect(o.destination)}function y(e){var t,i;this.start=function(a){for(var n in a=a||1e3,t=new A(e,this),this)"function"!=typeof this[n]&&(t[n]=this[n]);t.record(),i=setInterval(function(){t.requestData()},a)},this.stop=function(){t&&(t.stop(),clearTimeout(i))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){}}function A(e,t){this.record=function(f){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(this.width||(this.width=i.videoWidth||i.clientWidth||320),this.height||(this.height=i.videoHeight||i.clientHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas&&this.canvas.width&&this.canvas.height||(this.canvas={width:this.width,height:this.height}),u.width=this.canvas.width,u.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?(this.isHTMLObject=!0,i=this.video.cloneNode()):((i=document.createElement("video")).src=d.createObjectURL(e),i.width=this.video.width,i.height=this.video.height),i.muted=!0,i.play(),a=new Date().getTime(),n=new M.Video(t.speed,t.quality),console.log("canvas resolutions",u.width,"*",u.height),console.log("video width/height",i.width||u.width,"*",i.height||u.height),function e(){if(l){a=new Date().getTime(),setTimeout(e,500);return}if(!s){if(o)return setTimeout(e,100);var d=new Date().getTime()-a;if(!d)return e();a=new Date().getTime(),!h.isHTMLObject&&i.paused&&i.play(),c.drawImage(i,0,0,u.width,u.height),s||n.frames.push({duration:d,image:u.toDataURL("image/webp")}),r||function(e,t,i){var a,n,o,r=document.createElement("canvas");r.width=u.width,r.height=u.height;var s=r.getContext("2d"),d={r:0,g:0,b:0},c=Math.sqrt(195075),h=new Image;h.src=e.image,s.drawImage(h,0,0,u.width,u.height);var l=s.getImageData(0,0,u.width,u.height);a=0,n=l.data.length,o=l.data.length/4;for(var f=0;f<n;f+=4){var m={r:l.data[f],g:l.data[f+1],b:l.data[f+2]};Math.sqrt(Math.pow(m.r-d.r,2)+Math.pow(m.g-d.g,2)+Math.pow(m.b-d.b,2))<=0*c&&a++}return!(o-a<=0*o)}(n.frames[n.frames.length-1])||(r=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(e,10)}}()},this.clearOldRecordedFrames=function(){n.frames=[]};var i,a,n,o=!1;this.requestData=function(){if(!l){if(!n.frames.length){o=!1;return}o=!0;var e=n.frames.slice(0);n.frames=function(e,t,i,a){var n,o,r,s=document.createElement("canvas");s.width=u.width,s.height=u.height;for(var d=s.getContext("2d"),c=[],h=t>0&&t<=e.length?t:e.length,l={r:0,g:0,b:0},f=Math.sqrt(195075),m=!1,p=0;p<h;p++){if(!m){var v=new Image;v.src=e[p].image,d.drawImage(v,0,0,u.width,u.height);var g=d.getImageData(0,0,u.width,u.height);n=0,o=g.data.length,r=g.data.length/4;for(var w=0;w<o;w+=4){var b={r:g.data[w],g:g.data[w+1],b:g.data[w+2]};Math.sqrt(Math.pow(b.r-l.r,2)+Math.pow(b.g-l.g,2)+Math.pow(b.b-l.b,2))<=0*f&&n++}}!m&&r-n<=0*r||(m=!0,c.push(e[p]))}return(c=c.concat(e.slice(h))).length<=0&&c.push(e[e.length-1]),c}(e,-1),n.compile(function(e){t.ondataavailable(e),console.debug("video recorded blob size:",m(e.size))}),n.frames=[],o=!1}};var r=!1,s=!1;this.stop=function(){s=!0,this.requestData()};var u=document.createElement("canvas"),c=u.getContext("2d"),h=this,l=!1;this.pause=function(){l=!0},this.resume=function(){l=!1}}function T(e){if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";function t(){Date.now();var e=new Blob([new Uint8Array(a.stream().bin)],{type:"image/gif"});r.ondataavailable(e),a.stream().bin=[]}this.start=function(e){e=e||1e3;var r=this.videoWidth||320,d=this.videoHeight||240;s.width=c.width=r,s.height=c.height=d,(a=new GIFEncoder).setRepeat(0),a.setDelay(this.frameRate||this.speed||200),a.setQuality(this.quality||1),a.start(),Date.now(),h=requestAnimationFrame(function e(t){if(o){setTimeout(e,500,t);return}h=requestAnimationFrame(e),t-i<90||(c.paused&&c.play(),u.drawImage(c,0,0,r,d),a.addFrame(u),i=t)}),n=setTimeout(t,e)},this.stop=function(){h&&(cancelAnimationFrame(h),clearTimeout(n),t())};var i,a,n,o=!1;this.pause=function(){o=!0},this.resume=function(){o=!1},this.ondataavailable=function(){},this.onstop=function(){};var r=this,s=document.createElement("canvas"),u=s.getContext("2d"),c=document.createElement("video");c.muted=!0,c.autoplay=!0,c.src=d.createObjectURL(e),c.play();var h=null}a.MediaRecorderWrapper=g,a.StereoAudioRecorder=w,a.StereoAudioRecorderHelper=b,a.WhammyRecorder=y,a.WhammyRecorderHelper=A,a.GifRecorder=T;var M=function(){function e(e,t){this.frames=[],e||(e=1),this.duration=1e3/e,this.quality=t||.8}function t(e){function t(e){var t=[];e=(e.length%8?Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}var i=new function(e){var i,a=function(e){if(!e[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var t=e[0].width,i=e[0].height,a=e[0].duration,n=1;n<e.length;n++)a+=e[n].duration;return{duration:a,width:t,height:i}}(e);if(!a)return[];for(var n=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(i=a.duration,[].slice.call(new Uint8Array(new Float64Array([i]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:a.width,id:176},{data:a.height,id:186}]}]}]}]}],o=0,r=0;o<e.length;){var s=[],d=0;do s.push(e[o]),d+=e[o].duration,o++;while(o<e.length&&d<3e4);var u={id:524531317,data:function(e,t,i){return[{data:e,id:231}].concat(i.map(function(e){var i=function(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:i,id:163}}))}(r,0,s)};n[1].data.push(u),r+=d}return function e(i){for(var a=[],n=0;n<i.length;n++){var o=i[n].data;"object"==typeof o&&(o=e(o)),"number"==typeof o&&(o=t(o.toString(2))),"string"==typeof o&&(o=new Uint8Array(o.split("").map(function(e){return e.charCodeAt(0)})));var r=o.size||o.byteLength||o.length,s=Math.ceil(Math.ceil(Math.log(r)/Math.log(2))/8),d=r.toString(2),u=Array(7*s+7+1-d.length).join("0")+d,c=Array(s).join("0")+"1"+u;a.push(function(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}(i[n].id)),a.push(t(c)),a.push(o)}return new Blob(a,{type:"video/webm"})}(n)}(e.map(function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],i=t.indexOf("\x9d\x01*"),a=0,n=[];a<4;a++)n[a]=t.charCodeAt(i+3+a);return{width:16383&(n[1]<<8|n[0]),height:16383&(n[3]<<8|n[2]),data:t,riff:e}}(function e(t){for(var i=0,a={};i<t.length;){var n,o=t.substr(i,4),r=(n=i,parseInt(t.substr(n+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return Array(8-t.length+1).join("0")+t}).join(""),2)),s=t.substr(i+4+4,r);i+=8+r,a[o]=a[o]||[],"RIFF"===o||"LIST"===o?a[o].push(e(s)):a[o].push(s)}return a}(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(i)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i,a,n=(a=new Worker(i=d.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (e) {"+t.name+"(e.data);}"],{type:"application/javascript"}))),d.revokeObjectURL(i),a);n.onmessage=function(t){if(t.data.error){console.error(t.data.error);return}e(t.data)},n.postMessage(this.frames)},{Video:e}}();a.Whammy=M,window.ConcatenateBlobs=function(e,t,i){var a=[],n=0;!function o(){if(!e[n]){var r,s,d;return r=0,a.forEach(function(e){r+=e.byteLength}),s=new Uint16Array(r),d=0,void(a.forEach(function(e){var t=e.byteLength;t%2!=0&&(e=e.slice(0,t-1)),s.set(new Uint16Array(e),d),d+=t}),i(new Blob([s.buffer],{type:t})))}var u=new FileReader;u.onload=function(e){a.push(e.target.result),n++,o()},u.readAsArrayBuffer(e[n])}()},e.exports=a,void 0!==(o=(function(){return a}).apply(t,[]))&&(e.exports=o)}}]);